<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
        crossorigin="anonymous">

    <title>CRUD FROM API</title>

    <link href="index.css" rel="stylesheet">
</head>
<style>
    #container {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }

    h1 {
        margin-top: 0;
    }

    #input-container {
        margin-bottom: 20px;
    }

    #name-input,
    #update-name-input,
    #update-email-input {
        padding: 10px;
        font-size: 16px;
        margin-right: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        width: 200px; /* Adjust the width as needed */
    }

    #name-input:focus,
    #update-name-input:focus,
    #update-email-input:focus {
        border-color: #66afe9;
        outline: 0;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
    }

    button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
    }

    button:hover {
        background-color: #3e8e41;
    }

    table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 20px;
    }

    th,
    td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #4CAF50;
        color: white;
    }

    .description {
        max-width: 200px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    #update-container {
        display: none;
        margin-top: 20px;
    }

    #update-btn {
        background-color: #2196F3;
    }

    #cancel-btn {
        background-color: #f44336;
    }

    .edit-btn {
        background-color: #ffc107;
    }

    .delete-btn {
        background-color: #dc3545;
        margin-left: 10px;
    }

    #add-product-modal {
        display: none;
    }

    #add-product-form {
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 10px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
    }

    .form-group input,
    .form-group select {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }

    .form-group button {
        width: auto;
    }
</style>

<body>
    <div id="container">
        <h1>CRUD Operations</h1>
        <div id="input-container">
            <button id="add-btn" onclick="toggleModal()">Add Product</button>
        </div>

        <!-- Add Product Modal -->
        <div class="modal" id="add-product-modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Add Product</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="add-product-form">
                            <div class="form-group">
                                <label for="name">Name:</label>
                                <input type="text" id="name" name="name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="description">Description:</label>
                                <input type="text" id="description" name="description" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="category">Category:</label>
                                <select id="category" name="category" class="form-control" required>
                                    <option value="category1">Category 1</option>
                                    <option value="category2">Category 2</option>
                                    <option value="category3">Category 3</option>
                                    <!-- Add more categories as needed -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="image">Image:</label>
                                <input type="file" id="image" name="image" class="form-control" accept="image/*" required>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="addProduct()">Add</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <table id="productTableBody">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Image</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
        <div id="update-container">
            <input type="text" id="update-name-input">
            <input type="text" id="update-email-input">
            <button id="update-btn">Update</button>
            <button id="cancel-btn">Cancel</button>
        </div>
    </div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-yGBCT5Y3E0FgZMzj7mP3FKkZJ1aFECnI6Wz5x13uQeSkqF1S96zfxB8VBESObb1"
	crossorigin="anonymous"></script>

    <script>
        // Function to toggle the visibility of the add product modal
        function toggleModal() {
            const addProductModal = document.getElementById('add-product-modal');
            addProductModal.style.display === 'none' ? addProductModal.style.display = 'block' : addProductModal.style.display = 'none';
        }

        // Function to fetch and display products
        function fetchProducts() {
            fetch('http://localhost:5000/api/product')
                .then(response => response.json())
                .then(products => {
                    // Clear existing table rows
                    const tableBody = document.getElementById('table-body');
                    tableBody.innerHTML = '';

                    // Iterate over products and add rows to the table
                    products.forEach(product => {
                        const row = `
                        <tr>
                            <td>
                                <span class="custom-checkbox">
                                    <input type="checkbox" id="checkbox${product._id}" name="options[]" value="${product._id}">
                                    <label for="checkbox${product._id}"></label>
                                </span>
                            </td>
                            <td>${product.name}</td>
                            <td>${product.category}</td>
                            <td class="description" title="${product.description}">${product.description}</td>
                            <td>${product.image}</td>
                            <td>
                                <a href="#editEmployeeModal" class="edit" data-toggle="modal"><i class="material-icons"
                                        data-toggle="tooltip" title="Edit">&#xE254;</i></a>
                                <a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i
                                        class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
                            </td>
                        </tr>
                    `;
                        tableBody.innerHTML += row;
                    });
                })
                .catch(error => {
                    console.error('Error fetching products:', error);
                });
        }

        // Call the fetchProducts function to display products on page load
        fetchProducts();
    </script>
    </body>

</html>
